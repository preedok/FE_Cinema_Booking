---
import MainLayout from "../layouts/MainLayout.astro";
---

<MainLayout title="Authentication">
  <div class="min-h-[80vh] flex items-center justify-center py-12">
    <div id="auth-container"></div>
  </div>
</MainLayout>

<script>
  import { LoginForm } from "../components/auth/LoginForm";
  import { RegisterForm } from "../components/auth/RegisterForm";
  import React, { useState } from "react";
  import { createRoot } from "react-dom/client";

  const AuthPage = () => {
    const urlParams = new URLSearchParams(window.location.search);
    const [isRegister, setIsRegister] = useState(
      urlParams.get("register") === "true",
    );

    return React.createElement(
      "div",
      { className: "animate-fade-in" },
      isRegister
        ? React.createElement(RegisterForm, {
            onToggleForm: () => setIsRegister(false),
          })
        : React.createElement(LoginForm, {
            onToggleForm: () => setIsRegister(true),
          }),
    );
  };

  const container = document.getElementById("auth-container");
  if (container) {
    const root = createRoot(container);
    root.render(React.createElement(AuthPage));
  }
</script>
